var eu=$.extend({},eu);eu.showMsg=function(a){$.messager.show({title:"提示信息！",msg:a,timeout:3000,showType:"slide"})};eu.showAlertMsg=function(b,a){$.messager.alert("提示信息！",b,a)};eu.showProMsg=function(b,a){$.messager.progress({title:"提示信息！",msg:b});setTimeout(function(){$.messager.progress("close")},a)};eu.addTab=function(c,f,a,e,b){var d=true;if(undefined!=typeof e){d=e}if(typeof c=="string"){c=$("#"+c).tabs()}if(b=="undefined"){b=""}if(!c.tabs("exists",f)){c.tabs("addIframeTab",{tab:{title:f,closable:d,iconCls:b,cache:true},iframe:{src:a}})}else{c.tabs("select",f)}};eu.datagridCenter=function(){$(".datagrid-cell").css("text-align","center")};eu.panelCenter=function(){$(".panel-title").css("text-align","center")};eu.changeTheme=function(d){var f=$("#easyuiTheme");var b=f.attr("href");var a=b.substring(0,b.indexOf("themes"))+"themes/"+d+"/easyui.css";f.attr("href",a);var e=$("iframe");if(e.length>0){for(var c=0;c<e.length;c++){var g=e[c];$(g).contents().find("#easyuiTheme").attr("href",a)}}$.cookie("easyuiThemeName",d,{expires:7})};eu.unSelected=function(d,c,b){var a=$("#"+d).datagrid("getSelections");if(jQuery.inArray(b,a)!=-1){$("#"+d).datagrid("unselectRow",c)}else{$("#"+d).datagrid("selectRow",c)}};$.extend($.fn.combo.methods,{disableTextbox:function(b,a){return b.each(function(){a=a||{};var d=$(this).combo("textbox");var f=this;var c=$(this).combo("panel");var g=$(this).data("combo");if(a.stopArrowFocus){g.stopArrowFocus=a.stopArrowFocus;var e=$.data(this,"combo").combo.find("span.combo-arrow");e.unbind("click.combo").bind("click.combo",function(){if(c.is(":visible")){$(f).combo("hidePanel")}else{$("div.combo-panel").panel("close");$(f).combo("showPanel")}});d.unbind("mousedown.mycombo").bind("mousedown.mycombo",function(h){h.preventDefault()})}d.prop(a.stoptype?a.stoptype:"disabled",true);g.stoptype=a.stoptype?a.stoptype:"disabled"})},enableTextbox:function(a){return a.each(function(){var c=$(this).combo("textbox");var f=$(this).data("combo");if(f.stopArrowFocus){var e=this;var b=$(this).combo("panel");var d=$.data(this,"combo").combo.find("span.combo-arrow");d.unbind("click.combo").bind("click.combo",function(){if(b.is(":visible")){$(e).combo("hidePanel")}else{$("div.combo-panel").panel("close");$(e).combo("showPanel")}c.focus()});c.unbind("mousedown.mycombo");f.stopArrowFocus=null}c.prop(f.stoptype,false);f.stoptype=null})}});$.extend($.fn.form.methods,{getData:function(e,d){var c=e.serializeArray();var b={};for(var a in c){if(typeof(b[c[a].name])=="undefined"){if(d){b[c[a].name]=(c[a].value=="true"||c[a].value=="false")?c[a].value=="true":c[a].value}else{b[c[a].name]=c[a].value}}else{if(d){b[c[a].name]=(c[a].value=="true"||c[a].value=="false")?c[a].value=="true":c[a].value}else{b[c[a].name]+=","+c[a].value}}}return b},disable:function(d,b){var c=d.attr("id");var a="disable";if(!b){a="enable"}$("form[id='"+c+"'] :text").attr("disabled",b);$("form[id='"+c+"'] textarea").attr("disabled",b);$("form[id='"+c+"'] select").attr("disabled",b);$("form[id='"+c+"'] :radio").attr("disabled",b);$("form[id='"+c+"'] :checkbox").attr("disabled",b);$("#"+c+" input[class='combobox-f combo-f']").each(function(){if(this.id){alert("input"+this.id);$("#"+this.id).combobox(a)}});$("#"+c+" select[class='combobox-f combo-f']").each(function(){if(this.id){alert(this.id);$("#"+this.id).combobox(a)}});$("#"+c+" input[class='datebox-f combo-f']").each(function(){if(this.id){alert(this.id);$("#"+this.id).datebox(a)}})}});$.extend($.fn.tabs.methods,{loadTabIframe:function(b,a){return b.each(function(){var j=$(this).tabs("getTab",a.which);if(j==null){return}var i=j.panel("body");var c=$("iframe",i);if(c.length>0){c[0].contentWindow.document.write("");c[0].contentWindow.close();c.remove();if($.browser.msie){CollectGarbage()}}i.html("");i.css({overflow:"hidden",position:"relative"});var k=$('<div style="position:absolute;z-index:2;width:100%;height:100%;background:#ccc;z-index:1000;opacity:0.3;filter:alpha(opacity=30);"><div>').appendTo(i);var h=$('<div class="mask-message" style="z-index:3;width:auto;height:16px;line-height:16px;position:absolute;top:50%;left:50%;margin-top:-20px;margin-left:-92px;border:2px solid #d4d4d4;padding: 12px 5px 10px 30px;background: #ffffff url(\''+ctx+"/js/jquery/easyui-1.3.3/themes/default/images/loading.gif') no-repeat scroll 5px center;\">"+(a.iframe.message||"页面加载中...")+"</div>").appendTo(i);var d=$('<div style="position:absolute;width:100%;height:100%;z-index:1;background:#fff;"></div>').appendTo(i);var f=$('<div style="position:absolute;width:100%;height:100%;z-index:0;"></div>').appendTo(i);var g=document.createElement("iframe");g.src=a.iframe.src;g.frameBorder=a.iframe.frameBorder||0;g.height=a.iframe.height||"100%";g.width=a.iframe.width||"100%";var e=function(){$([k[0],h[0]]).fadeOut(a.iframe.delay||"slow",function(){$(this).remove();if($(this).hasClass("mask-message")){d.fadeOut(a.iframe.delay||"slow",function(){$(this).remove()})}})};if(g.attachEvent){g.attachEvent("onload",e)}else{g.onload=e}f[0].appendChild(g)})},addIframeTab:function(b,a){return b.each(function(){if(a.tab.href){delete a.tab.href}$(this).tabs("add",a.tab);$(this).tabs("loadTabIframe",{which:a.tab.title,iframe:a.iframe})})},updateIframeTab:function(b,a){return b.each(function(){a.iframe=a.iframe||{};if(!a.iframe.src){var d=$(this).tabs("getTab",a.which);if(d==null){return}var c=d.panel("body");var e=c.find("iframe");if(e.length===0){return}$.extend(a.iframe,{src:e.attr("src")})}$(this).tabs("loadTabIframe",a)})}});$.fn.panel.defaults.loadingMessage="加载中....";$.fn.datagrid.defaults.loadMsg="加载中....";var removeEasyuiTipFunction=function(){window.setTimeout(function(){$("div.validatebox-tip").remove()},0)};$.fn.panel.defaults.onClose=removeEasyuiTipFunction;$.fn.window.defaults.onClose=removeEasyuiTipFunction;$.fn.dialog.defaults.onClose=removeEasyuiTipFunction;var createGridHeaderContextMenu=function(f,j){f.preventDefault();var a=$(this);var g=this.headerContextMenu;if(!g){var b=$('<div style="width:100px;"></div>').appendTo("body");var d=a.datagrid("getColumnFields");for(var c=0;c<d.length;c++){var k=a.datagrid("getColumnOption",d[c]);var h=k.title;var j=k.field;if(j=="ck"){h="全选"}if(!k.hidden){$('<div iconCls="icon-ok" field="'+d[c]+'"/>').html(h).appendTo(b)}else{$('<div iconCls="icon-empty" field="'+d[c]+'"/>').html(h).appendTo(b)}}g=this.headerContextMenu=b.menu({onClick:function(e){var i=$(e.target).attr("field");if(e.iconCls=="icon-ok"){if(d.length>1){a.datagrid("hideColumn",i);$(this).menu("setIcon",{target:e.target,iconCls:"icon-empty"})}}else{a.datagrid("showColumn",i);$(this).menu("setIcon",{target:e.target,iconCls:"icon-ok"})}}})}g.menu("show",{left:f.pageX,top:f.pageY})};$.fn.datagrid.defaults.onHeaderContextMenu=createGridHeaderContextMenu;$.fn.treegrid.defaults.onHeaderContextMenu=createGridHeaderContextMenu;var easyuiPanelOnMove=function(b,f){var c=b;var j=f;if(c<1){c=1}if(j<1){j=1}var a=parseInt($(this).parent().css("width"))+14;var h=parseInt($(this).parent().css("height"))+14;var g=c+a;var e=j+h;var i=$(document).width();var d=$(document).height();if(g>i){c=i-a}if(e>d){j=d-h}$(this).parent().css({left:c,top:j})};$.fn.dialog.defaults.onMove=easyuiPanelOnMove;$.fn.window.defaults.onMove=easyuiPanelOnMove;$.fn.panel.defaults.onMove=easyuiPanelOnMove;$.fn.panel.defaults.onBeforeDestroy=function(){var b=$("iframe",this);try{if(b.length>0){b[0].contentWindow.document.write("");b[0].contentWindow.close();b.remove();if($.browser.msie){CollectGarbage()}}}catch(a){}};$.extend($.fn.datagrid.methods,{addEditor:function(c,b){if(b instanceof Array){$.each(b,function(d,f){var g=$(c).datagrid("getColumnOption",f.field);g.editor=f.editor})}else{var a=$(c).datagrid("getColumnOption",b.field);a.editor=b.editor}},removeEditor:function(c,b){if(b instanceof Array){$.each(b,function(d,f){var g=$(c).datagrid("getColumnOption",f);g.editor={}})}else{var a=$(c).datagrid("getColumnOption",b);a.editor={}}}});var gridautoMergeCellsOptions={autoMergeCells:function(b,a){return b.each(function(){var g=$(this);if(!a){a=g.datagrid("getColumnFields")}var m=g.datagrid("getRows");var e=0,d=0,k={};for(e;e<m.length;e++){var l=m[e];d=0;for(d;d<a.length;d++){var h=a[d];var c=k[h];if(!c){c=k[h]={};c[l[h]]=[e]}else{var f=c[l[h]];if(f){f.push(e)}else{f=c[l[h]]=[e]}}}}$.each(k,function(j,i){$.each(i,function(){var q=this;if(q.length>1){var o,s,r=q[0];for(var n=0;n<q.length;n++){o=q[n];s=q[n+1];if(s&&(s-o)==1){continue}var p=o-r+1;if(p>1){g.datagrid("mergeCells",{index:r,field:j,rowspan:p})}if(s&&(s-o)!=1){r=s}}}})})})}};var gridTooltipOptions={showTooltip:function(d,c){if(!c){c={}}function a(g,j,i,h){if($(j).text()==""){return}var f=h.data("datagrid");g.content='<div class="tipcontent">'+g.content+"</div>";$(j).tooltip({content:g.content,trackMouse:true,position:c.position,onHide:function(){$(this).tooltip("destroy")},onUpdate:function(k){var e=$(this).tooltip("tip");if(parseInt(e.css("width"))>500){e.css("width",500)}},onShow:function(){var e=$(this).tooltip("tip");if(g.tipStyler){e.css(g.tipStyler)}if(g.contentStyler){e.find("div.tipcontent").css(g.contentStyler)}if(g.attachToMouse){fixPosition(e,c.position,f)}}}).tooltip("show")}function b(g,h,f){var e=f.data("datagrid");$(g).undelegate(h,"mouseover").undelegate(h,"mouseout").undelegate(h,"mousemove").delegate(h,{mouseover:function(j){if($(this).attr("field")===undefined){return}e.factContent=$(this).find(">div").clone().css({"margin-left":"-5000px",width:"auto",display:"inline",position:"absolute"}).appendTo("body");var i=e.factContent.width();c.content=$(this).find(">div").clone().css({width:"auto"}).html();if(c.onlyShowInterrupt&&c.fields===undefined){if(i>$(this).width()){a(c,this,j,f)}}else{a(c,this,j,f)}},mouseout:function(i){if(e.factContent){e.factContent.remove();e.factContent=null}}})}return d.each(function(){var g=$(this);var f=$(this).data("datagrid");if(!f.tooltip){var e=g.datagrid("getPanel").panel("panel");e.find(".datagrid-body").each(function(){var h=$(this).find("> div.datagrid-body-inner").length?$(this).find("> div.datagrid-body-inner")[0]:this;if(c.fields&&typeof c.fields=="object"){$.each(c.fields,function(){var i=this;b(h,"td[field="+i+"]",g)})}else{b(h,"td",g)}})}})},closeTooltip:function(a){return a.each(function(){var c=$(this).data("datagrid");if(c.factContent){c.factContent.remove();c.factContent=null}var b=$(this).datagrid("getPanel").panel("panel");b.find(".datagrid-body").undelegate("td","mouseover").undelegate("td","mouseout").undelegate("td","mousemove")})}};$.extend($.fn.datagrid.methods,gridTooltipOptions,gridautoMergeCellsOptions);$.extend($.fn.treegrid.methods,gridTooltipOptions);$.extend($.fn.tree.methods,{getCheckedExt:function(c){var a=$(c).tree("getChecked");var b=$(c).find("span.tree-checkbox2").parent();$.each(b,function(){var d=$.extend({},$.data(this,"tree-node"),{target:this});a.push(d)});return a},getSolidExt:function(c){var a=[];var b=$(c).find("span.tree-checkbox2").parent();$.each(b,function(){var d=$.extend({},$.data(this,"tree-node"),{target:this});a.push(d)});return a}});eu.myCascadeCheck=function(b,e){if(b=="undefined"||e=="undefined"){return}if(e.checked){e.checked=false;b.tree("uncheck",e.target)}else{e.checked=true;b.tree("check",e.target)}var f;f=e;while(f){var a=b.tree("getParent",f.target);f=a;if(f){b.tree("check",f.target)}}f=e;if(f){var g=b.tree("getChildren",f.target);var d;for(var c=0;c<=g.length;c++){d=g[c];if(d){if(f.checked){b.tree("check",d.target)}else{b.tree("uncheck",d.target)}}}}};$.fn.tree.defaults.loadFilter=function(e,h){var b=$(this).data().tree.options;var a,c,g;if(b.parentField){a=b.idFiled||"id";c=b.textFiled||"text";g=b.parentField;var f,d,j=[],k=[];for(f=0,d=e.length;f<d;f++){k[e[f][a]]=e[f]}for(f=0,d=e.length;f<d;f++){if(k[e[f][g]]&&e[f][a]!=e[f][g]){if(!k[e[f][g]]["children"]){k[e[f][g]]["children"]=[]}e[f]["text"]=e[f][c];k[e[f][g]]["children"].push(e[f])}else{e[f]["text"]=e[f][c];j.push(e[f])}}return j}return e};$.fn.treegrid.defaults.loadFilter=function(e,g){var b=$(this).data().treegrid.options;var a,c,h;if(b.parentField){a=b.idFiled||"id";c=b.textFiled||"text";h=b.parentField;var f,d,j=[],k=[];for(f=0,d=e.length;f<d;f++){k[e[f][a]]=e[f]}for(f=0,d=e.length;f<d;f++){if(k[e[f][h]]&&e[f][a]!=e[f][h]){if(!k[e[f][h]]["children"]){k[e[f][h]]["children"]=[]}e[f]["text"]=e[f][c];k[e[f][h]]["children"].push(e[f])}else{e[f]["text"]=e[f][c];j.push(e[f])}}return j}return e};$.fn.combotree.defaults.loadFilter=$.fn.tree.defaults.loadFilter;$.modalDialog=function(a){var b=$.extend({title:"",width:840,height:680,modal:true,onClose:function(){$(this).dialog("destroy")}},a);b.modal=true;return $.modalDialog.handler=$("<div/>").dialog(b)};$.extend($.fn.datagrid.defaults.editors,{combogrid:{init:function(a,c){var b=$('<input type="text" class="datagrid-editable-input">').appendTo(a);b.combogrid(c);return b},destroy:function(a){$(a).combogrid("destroy")},getValue:function(a){return $(a).combogrid("getValue")},setValue:function(b,a){$(b).combogrid("setValue",a)},resize:function(b,a){$(b).combogrid("resize",a)}},combocheckboxtree:{init:function(a,b){var c=$("<input />").appendTo(a);b.multiple=true;c.combotree(b);return c},destroy:function(a){$(a).combotree("destroy")},getValue:function(a){return $(a).combotree("getValues").join(",")},setValue:function(b,a){$(b).combotree("setValues",$.getList(a))},resize:function(b,a){$(b).combotree("resize",a)}},datebox:{init:function(a,b){var c=$('<input type="text">').appendTo(a);c.datebox(b);return c},destroy:function(a){$(a).datebox("destroy")},getValue:function(a){return $(a).datebox("getValue")},setValue:function(b,a){$(b).datebox("setValue",$.formatDate(a,"yyyy-MM-dd"))},resize:function(b,a){$(b).datebox("resize",a)}},datetimebox:{init:function(a,b){var c=$("<input />").appendTo(a);c.datetimebox(b);return c},destroy:function(a){$(a).datetimebox("destroy")},getValue:function(a){return $(a).datetimebox("getValue")},setValue:function(b,a){$(b).datetimebox("setValue",$.formatDate(a,"yyyy-MM-dd HH:mm:ss"))},resize:function(b,a){$(b).datetimebox("resize",a)}},my97:{init:function(a,b){var c=$("<input />").appendTo(a);c.my97(b);return c},getValue:function(a){return $(a).my97("getValue")},setValue:function(b,a){$(b).my97("setValue",a)},setDisabled:function(b,a){$(b).my97("setDisabled",a)}},multiplecombobox:{init:function(a,b){var c=$("<input />").appendTo(a);b.multiple=true;c.combobox(b);return c},destroy:function(a){$(a).combobox("destroy")},getValue:function(a){return $(a).combobox("getValues").join(",")},setValue:function(b,a){$(b).combobox("setValues",$.getList(a))},resize:function(b,a){$(b).combobox("resize",a)}},numberspinner:{init:function(a,c){var b=$('<input type="text">').appendTo(a);return b.numberspinner(c)},destroy:function(a){$(a).numberspinner("destroy")},getValue:function(a){return $(a).numberspinner("getValue")},setValue:function(b,a){$(b).numberspinner("setValue",a)},resize:function(b,a){$(b).numberspinner("resize",a)}},password:{init:function(a,c){var b=$('<input class="datagrid-editable-input" type="password"/>').appendTo(a);if(!$.fn.validatebox.defaults.rules.safepass){$.extend($.fn.validatebox.defaults.rules,{safepass:{validator:function(d,e){return !(/^(([A-Z]*|[a-z]*|\d*|[-_\~!@#\$%\^&\*\.\(\)\[\]\{\}<>\?\\\/\'\"]*)|.{0,5})$|\s/.test(d))},message:"密码由字母和数字组成，至少6位"}})}b.validatebox(c);return b},getValue:function(a){alert($(a).val());alert(a.value);return $(a).val()},setValue:function(b,a){$(b).val(a)},resize:function(c,b){var a=$(c);if($.boxModel==true){a.width(b-(a.outerWidth()-a.width()))}else{a.width(b)}}}});$.fn.datebox.defaults.formatter=function(a){var b=new Date(a);return b.format("yyyy-MM-dd")};$.fn.datebox.defaults.parser=function(c){if(!c){return new Date()}var b=new Date(c).format("yyyy-MM-dd").split("-");var f=parseInt(b[0],10);var a=parseInt(b[1],10);var e=parseInt(b[2],10);if(!isNaN(f)&&!isNaN(a)&&!isNaN(e)){return new Date(f,a-1,e)}else{return new Date()}};$.fn.datetimebox.defaults.formatter=function(a){var b=new Date(a);return b.format("yyyy-MM-dd hh:mm:ss")};$.fn.datetimebox.defaults.parser=function(c){if(!c){return new Date()}var b=new Date(c).format("yyyy-MM-dd hh:mm:ss").split("-");var f=parseInt(b[0],10);var a=parseInt(b[1],10);var e=parseInt(b[2],10);if(!isNaN(f)&&!isNaN(a)&&!isNaN(e)){return new Date(f,a-1,e)}else{return new Date()}};var easyuiErrorFunction=function(a){$.messager.progress("close");var b=a.responseText;if(!b){eu.showAlertMsg("服务器无响应.","error")}else{eu.showAlertMsg(b,"error")}};$.fn.datagrid.defaults.onLoadError=easyuiErrorFunction;$.fn.treegrid.defaults.onLoadError=easyuiErrorFunction;$.fn.tree.defaults.onLoadError=easyuiErrorFunction;$.fn.combogrid.defaults.onLoadError=easyuiErrorFunction;$.fn.combobox.defaults.onLoadError=easyuiErrorFunction;$.fn.form.defaults.onLoadError=easyuiErrorFunction;$.ajaxSetup({type:"POST",error:function(a,c,b){$.messager.progress("close");if(!data){eu.showAlertMsg("服务器无响应.","error")}else{eu.showAlertMsg(data,"error")}}});